var Author = require('../models/author.js');

module.exports = {
    index: function(req, res) {
        Author.find({}, function (err, authors) {
            if (err) {
                res.json(err);
            }
            else {
                res.json({message: "Get all authors!", authors});
            }
        })
    },
    getAuthor: function(req, res) {
        Author.findOne({ _id: req.params.id }, function (err, data) {
            if (err) {
                res.json(err);
            }
            else {
                res.json({message: "Get author!", data:data});
            }
        })
    },
    newAuthor: function(req, res) {
        var author = new Author({ name: req.body.name});
        author.save(function (err, author) {
            if (err) {
                res.json(err);
            }
            else {
                res.json({message: "Added author!", author: author});
            }
        })
    },
    editAuthor: function(req, res) {
        Author.findOne({ _id: req.params.id }, function (err, editAuthor) {
            if (err) {
                res.json(err);
            }
            else {
                if (req.body.name){
                    editAuthor.name = req.body.name;
                }
                editAuthor.save(function (err){
                    if (err) {
                        res.json(err);
                    }
                    else {
                        res.json({message: "Edited author!", editAuthor});
                    }
                })
            }
        })
    },
    deleteAuthor: function(req, res) {
        Author.remove({ _id: req.params.id }, function (err) {
            if (err) {
                res.json(err);
            }
            else {
                res.json({message: "Removed author!", removedAuthor: req.params.id});
            }
        })
    },
}